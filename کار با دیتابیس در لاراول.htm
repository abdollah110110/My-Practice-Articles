<!DOCTYPE html>
<html lang="fa"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="shortcut icon" type="image/x-icon" href="http://samaiweb.com/images/icon-logo.png">

        
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

        <title>سمعی وب - سایت شخصی عبدالله سمعی طراح و برنامه نویس | کار با دیتابیس در laravel</title>

        <link media="all" type="text/css" rel="stylesheet" href="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/bootstrap_002.css">

        <link media="all" type="text/css" rel="stylesheet" href="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/bootstrap.css">

        <link media="all" type="text/css" rel="stylesheet" href="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/font-awesome.css">

        <link media="all" type="text/css" rel="stylesheet" href="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/parsley.htm">

        <link media="all" type="text/css" rel="stylesheet" href="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/style.css">

        <link media="all" type="text/css" rel="stylesheet" href="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/bootstrap-submenu-styles.css">

        <link media="all" type="text/css" rel="stylesheet" href="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/comments-styles.css">

        <link media="all" type="text/css" rel="stylesheet" href="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/transition.css">

        <link media="all" type="text/css" rel="stylesheet" href="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/vs.css">


                <style type="text/css">
            #main{
                padding-top: 85px;
            }
        </style>
        

        
    </head>
    <body>

        
        <!-- navbar -->
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="glyphicon glyphicon-chevron-down"></span>
                    </button>
                    <a href="http://samaiweb.com/" class="navbar-brand h2" title="" data-toggle="tooltip" data-original-title="وب سایت شخصی عبدالله سمعی">سمعی وب</a>
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul id="navbar-nav" class="nav navbar-nav">
                        <li class="">
                            <a href="http://samaiweb.com/">صفحه اصلی</a>
                        </li>
                                                <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">موضوعات <span class="fa fa-caret-down"></span></a>
                            <ul class="dropdown-menu">
                                                                    <li class="dropdown dropdown-submenu">
                                                                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                                برنامه نویسی سمت سرور <span class="fa fa-caret-left"></span>
                                            </a>
                                            <ul class="dropdown-menu">
                                                                                                    <li>
                                                        <a href="http://samaiweb.com/categories/1">
                                                            PHP <span class="pull-left badge">0</span>
                                                        </a>
                                                    </li>
                                                                                                    <li>
                                                        <a href="http://samaiweb.com/categories/2">
                                                            laravel <span class="pull-left badge">7</span>
                                                        </a>
                                                    </li>
                                                                                                    <li>
                                                        <a href="http://samaiweb.com/categories/9">
                                                            Mysql <span class="pull-left badge">1</span>
                                                        </a>
                                                    </li>
                                                                                            </ul>
                                                                            </li>
                                                                    <li class="dropdown dropdown-submenu">
                                                                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                                طراحی وب سایت <span class="fa fa-caret-left"></span>
                                            </a>
                                            <ul class="dropdown-menu">
                                                                                                    <li>
                                                        <a href="http://samaiweb.com/categories/8">
                                                            Jquery and Javascript <span class="pull-left badge">3</span>
                                                        </a>
                                                    </li>
                                                                                            </ul>
                                                                            </li>
                                                            </ul>
                        </li>
                        <li class="">
                            <a href="http://samaiweb.com/about">درباره ما</a>
                        </li>
                        <li class="">
                            <a href="http://samaiweb.com/contact">تماس با ما</a>
                        </li>
                                                    <li>
                                <a href="http://samaiweb.com/admin">مدیریت</a>
                            </li>
                            <li>
                                <a href="http://samaiweb.com/logout">خروج</a>
                            </li>
                                            </ul>
                    <form action="http://samaiweb.com/search" method="POST" class="navbar-form navbar-left hidden-xs hidden-sm">
                        <input name="_token" value="SCXTG569bNX9OwnFvq8Nm8td7itDeil4fqyFTWYA" type="hidden">
                        <div class="form-group">
                            <input name="search" placeholder="جستجو" type="text">
                        </div>
                        <button type="submit" class="btn btn-default">
                            <span class="fa fa-search"></span>
                        </button>
                    </form>
                </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
        </nav><!-- End of navbar -->

        
        <div class="row">
            <div id="main" class="container-fluid">
                <div class="container">
                    <div id="sidebar" class="col-xs-12 col-md-3">
                        <div id="xs-search" class="sidebar-head hidden-md hidden-lg">
                            <div class="sidbar-main">
                                <div class="sidebar-content alert-info">
                                    <form action="http://samaiweb.com/search" method="POST">
                                        <input name="_token" value="SCXTG569bNX9OwnFvq8Nm8td7itDeil4fqyFTWYA" type="hidden">
                                        <input name="search" class="form-group form-control" placeholder="جستجو در مطالب ..." type="text">
                                        <button type="submit" class="btn btn-default btn-lg">جستجو</button>
                                    </form>
                                </div>
                                <!--<div class="sidebar-foot"></div>-->
                            </div>
                        </div>
                        <div class="sidebar-head">
                            <h3>موضوعات</h3>
                            <div class="sidbar-main">
                                <div class="sidebar-content">
                                                                            <ul class="list-group">
                                                                                            <li class="list-group-item">
                                                    <a>برنامه نویسی سمت سرور<i class="fa fa-caret-down pull-left"></i></a>
                                                    <ul class="list-group sub-list-grop" style="display: none;">
                                                                                                                    <li class="list-group-item">
                                                                <a href="http://samaiweb.com/categories/1">
                                                                    PHP <span class="pull-left badge">0</span>
                                                                </a>
                                                            </li>
                                                                                                                    <li class="list-group-item">
                                                                <a href="http://samaiweb.com/categories/2">
                                                                    laravel <span class="pull-left badge">8</span>
                                                                </a>
                                                            </li>
                                                                                                                    <li class="list-group-item">
                                                                <a href="http://samaiweb.com/categories/9">
                                                                    Mysql <span class="pull-left badge">1</span>
                                                                </a>
                                                            </li>
                                                                                                            </ul>
                                                </li>
                                                                                    </ul>
                                                                            <ul class="list-group">
                                                                                            <li class="list-group-item">
                                                    <a>طراحی وب سایت<i class="fa fa-caret-down pull-left"></i></a>
                                                    <ul class="list-group sub-list-grop">
                                                                                                                    <li class="list-group-item">
                                                                <a href="http://samaiweb.com/categories/8">
                                                                    Jquery and Javascript <span class="pull-left badge">3</span>
                                                                </a>
                                                            </li>
                                                                                                            </ul>
                                                </li>
                                                                                    </ul>
                                                                    </div>
                                <!--<div class="sidebar-foot"></div>-->
                            </div>
                        </div>
                    </div>
                    <div id="content" class="col-xs-12 col-md-9">
                                                <div class="row">
    <div class="col-xs-12">
            <div class="thumbnail post">
                <h1><span class="fa fa-arrow-left"></span> کار با دیتابیس در laravel</h1>
                <div class="alert"><p><span dir="rtl">برای کار با دیتابیس ابتدا تنظیمات زیر را در فایل env انجام میدهیم:</span></p>

<pre><code class=" hljs ini"><span class="hljs-setting">DB_CONNECTION=<span class="hljs-value">mysql</span></span>
<span class="hljs-setting">DB_HOST=<span class="hljs-value"><span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span></span></span>
<span class="hljs-setting">DB_PORT=<span class="hljs-value"><span class="hljs-number">3306</span></span></span>
<span class="hljs-setting">DB_DATABASE=<span class="hljs-value">laravel_test</span></span>
<span class="hljs-setting">DB_USERNAME=<span class="hljs-value">root</span></span>
<span class="hljs-setting">DB_PASSWORD=<span class="hljs-value"></span></span></code></pre>

<p><span dir="rtl">بعد تنظیمات زیر را در فایل config/database.php انجام میدهیم:</span></p>

<pre><code class="language-0 hljs php"><span class="hljs-string">'mysql'</span> =&gt; [
    <span class="hljs-string">'driver'</span> =&gt; <span class="hljs-string">'mysql'</span>,
    <span class="hljs-string">'host'</span> =&gt; <span class="hljs-string">'127.0.0.1'</span>,
    <span class="hljs-string">'port'</span> =&gt; <span class="hljs-string">'3306'</span>,
    <span class="hljs-string">'database'</span> =&gt; <span class="hljs-string">'laravel_test'</span>,
    <span class="hljs-string">'username'</span> =&gt; <span class="hljs-string">'root'</span>,
    <span class="hljs-string">'password'</span> =&gt; <span class="hljs-string">''</span>,
    <span class="hljs-string">'unix_socket'</span> =&gt; env(<span class="hljs-string">'DB_SOCKET'</span>, <span class="hljs-string">''</span>),
    <span class="hljs-string">'charset'</span> =&gt; <span class="hljs-string">'utf8'</span>,
    <span class="hljs-string">'collation'</span> =&gt; <span class="hljs-string">'utf8_general_ci'</span>,
    <span class="hljs-string">'prefix'</span> =&gt; <span class="hljs-string">''</span>,
    <span class="hljs-string">'strict'</span> =&gt; <span class="hljs-keyword">true</span>,
    <span class="hljs-string">'engine'</span> =&gt; <span class="hljs-string">'InnoDB'</span>,
],</code></pre>

<p>&nbsp;</p>

<h2><span dir="rtl">در لاراول سه روش برای کار با دیتابیس وجود دارد:</span></h2>

<p>&nbsp;</p>

<p><span dir="rtl">1- با استفاده از facade کلاس DB و متدهای select, 
update, insert, delete و statement کوئری به دیتابیس بزنیم و از پارامتر 
binding هم به مانند PDO استفاده می کنیم که برای جلوگیری از حملات SQL 
Injection به کار می رود.<br>
در <a href="https://laravel.com/docs/5.1/database" target="_blank">مستندات</a> لاراول میتوانید مثال ها را ببینید. </span></p>

<pre><code class="language-0 hljs sql">DB::<span class="hljs-operator"><span class="hljs-keyword">select</span>(<span class="hljs-string">'select * from posts'</span>);</span>

DB::<span class="hljs-operator"><span class="hljs-keyword">insert</span>(<span class="hljs-string">'insert into posts (title, body, active) values (?, ?, ?)'</span>, [<span class="hljs-string">'عنوان'</span>, <span class="hljs-string">'مطلب'</span>, <span class="hljs-number">1</span>]);</span>

DB::<span class="hljs-operator"><span class="hljs-keyword">update</span>(<span class="hljs-string">'update posts set title="عنوان مطلب", active=0 where id=:id'</span>, [<span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">1</span>]);</span>

DB::<span class="hljs-operator"><span class="hljs-keyword">delete</span>(<span class="hljs-string">'delete from posts where id=:id'</span>, [<span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">1</span>])</span></code></pre>

<p>&nbsp;</p>

<p><span dir="rtl">2- با استفاده از Query Builder که این روش نسبت به روش قبلی بهتر است چون Syntax گویاتری دارد و میتوانید <a href="https://laravel.com/docs/5.1/queries" target="_blank">مستندات</a> لاراول را ببینید. </span></p>

<pre><code class="language-0 hljs coffeescript"><span class="hljs-attribute">DB</span>::table<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">'posts'</span>)</span>-&gt;</span>where<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">'id'</span>, <span class="hljs-number">1</span>)</span>-&gt;</span>select<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">'title'</span>)</span>-&gt;</span>get();

<span class="hljs-attribute">DB</span>::table<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">'posts'</span>)</span>-&gt;</span>insert([
	[
		<span class="hljs-string">'title'</span><span class="hljs-function"> =&gt;</span> <span class="hljs-string">'new title 1'</span>, 
		<span class="hljs-string">'body'</span><span class="hljs-function"> =&gt;</span> <span class="hljs-string">'new body 1'</span>, 
		<span class="hljs-string">'active'</span><span class="hljs-function"> =&gt;</span> <span class="hljs-number">1</span>
	]
]);

<span class="hljs-attribute">DB</span>::table<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">'posts'</span>)</span>-&gt;</span>orderBy<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">'id'</span>)</span>-&gt;</span>chunk(<span class="hljs-number">100</span>, <span class="hljs-reserved">function</span>($posts){
    foreach($posts as $post){
    $updateActive = ($post-&gt;active != <span class="hljs-number">1</span>) ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;
    <span class="hljs-attribute">DB</span>::table<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">'posts'</span>)</span>
        -&gt;</span>where<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">'id'</span>, $post-&gt;id)</span>
        -&gt;</span>update([<span class="hljs-string">'active'</span><span class="hljs-function"> =&gt;</span> $updateActive]);
    }
});

<span class="hljs-attribute">DB</span>::table<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">'posts'</span>)</span>-&gt;</span>where<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">'id'</span>, <span class="hljs-string">'&lt;'</span>, <span class="hljs-number">35</span>)</span>-&gt;</span><span class="hljs-keyword">delete</span>();</code></pre>

<p>&nbsp;</p>

<p><strong><span style="color:#00aaff"><span dir="rtl">استفاده از raw:</span></span></strong></p>

<pre><code class="language-0 hljs coffeescript"><span class="hljs-regexp">/*select count(*) as count from `posts` where `active` = ? group by `active`*/</span>

$posts1 = <span class="hljs-attribute">DB</span>::table<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">'posts'</span>)</span>
        -&gt;</span>select<span class="hljs-function"><span class="hljs-params">(DB::raw(<span class="hljs-string">'count(*) as count'</span>))</span>
        -&gt;</span>where<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">'active'</span>, <span class="hljs-string">'='</span>, <span class="hljs-number">1</span>)</span>
        -&gt;</span>groupBy<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">'active'</span>)</span>
        -&gt;</span>get();</code></pre>

<p>&nbsp;</p>

<p><span style="color:#00aaff"><strong><span dir="rtl">استفاده از join:</span></strong></span></p>

<pre><code class="language-0 hljs coffeescript"><span class="hljs-attribute">DB</span>::table<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">'orders'</span>)</span>
    -&gt;</span>join(<span class="hljs-string">'customers'</span>, <span class="hljs-reserved">function</span>($join){
        $join-&gt;<span class="hljs-literal">on</span>(<span class="hljs-string">'orders.OrderID'</span>, <span class="hljs-string">'='</span>, <span class="hljs-string">'customers.CustomerID'</span>);
    })<span class="hljs-function">
    -&gt;</span>select<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">'orders.OrderID'</span>, <span class="hljs-string">'customers.CustomerName'</span>, <span class="hljs-string">'customers.City'</span>, <span class="hljs-string">'customers.Address'</span>)</span>
    -&gt;</span>get();</code></pre>

<p>&nbsp;</p>

<p><span dir="rtl">برای مشاهده انواع استفاده از where به <a href="https://laravel.com/docs/5.1/queries#where-clauses" target="_blank">مستندات</a> لاراول مراجعه کنید.</span></p>

<p>&nbsp;</p>

<p><span dir="rtl">3- استفاده از &nbsp;Eloquent ORM که Eloquent یک پیاده
 سازی ActiveRecord است که برای کار با دیتابیس امکانات بهتری را در اختیار
 میگذارد که در آن هر جدول در دیتابیس با یک کلاس Model در ارتباط است. مدل
 ها در پوشه app فریمورک قرار دارند.</span></p>

<p><span dir="rtl"><span style="color:#00aaff"><strong>کار با Model:</strong></span></span></p>

<p>برای ایجاد یک مدل دستور زیر را در خط فرمان وارد میکنیم:</p>

<pre><code class=" hljs css"><span class="hljs-tag">php</span> <span class="hljs-tag">artisan</span> <span class="hljs-tag">make</span><span class="hljs-pseudo">:model</span> <span class="hljs-tag">Post</span> <span class="hljs-attr_selector">[--m OR --migration]</span></code></pre>

<p><span dir="rtl">اگر در انتهای دستور migration-- یا m-- را هم قرار دهیم برای مدل مربوطه یک فایل <a href="http://forum.ncis.ir/Thread-%D8%A2%D9%85%D9%88%D8%B2%D8%B4-%D8%AC%D8%A7%D9%85%D8%B9-Laravel?pid=5271#pid5271" target="_blank">migration</a> هم ایجاد می شود که می توانیم جدول موردنظر را در دیتابیس با migration ایجاد کنیم.</span></p>

<p>&nbsp;</p>

<p><span dir="rtl">اگر میخواهیم نام مدل یا جدول را به هر نام دلخواهی 
داشته باشیم باید پراپرتی table$ را برابر با آن قرار بدهیم و همچنین 
لاراول به طور پیش فرض انتظار دارد که دوتا ستون به نام های created_at و 
updated_at هم در جدول وجود داشته باشد که تاریخ و زمان ایجاد و به 
روزرسانی رکورد در آن ثبت می شود که اگر این دو ستون را در جدولمان نداشته 
باشیم باید پراپرتی timestamps$ را برابر false قرار بدهیم :</span></p>

<pre><code class="language-0 hljs php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">App</span>;
 
<span class="hljs-keyword">use</span> <span class="hljs-title">Illuminate</span>\<span class="hljs-title">Database</span>\<span class="hljs-title">Eloquent</span>\<span class="hljs-title">Model</span>;
 
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Post</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Model</span>
{</span>
   <span class="hljs-keyword">protected</span> <span class="hljs-variable">$table</span> = <span class="hljs-string">'posts'</span>;
   
   <span class="hljs-keyword">public</span> <span class="hljs-variable">$timestamps</span> = <span class="hljs-keyword">false</span>;
}</code></pre>

<p>&nbsp;</p>

<p><span dir="rtl"><span style="color:#00aaff"><strong>خواندن رکوردها از مدل:</strong></span></span></p>

<pre><code class="language-0 hljs coffeescript"><span class="hljs-attribute">Post</span>::all();

<span class="hljs-attribute">Post</span>::where<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">'active'</span>, <span class="hljs-number">1</span>)</span>
       -&gt;</span>orderBy<span class="hljs-function"><span class="hljs-params">(<span class="hljs-string">'id'</span>, <span class="hljs-string">'desc'</span>)</span>
       -&gt;</span>take<span class="hljs-function"><span class="hljs-params">(<span class="hljs-number">10</span>)</span>
       -&gt;</span>get();</code></pre>

<p><span dir="rtl">برای مطالعه بیشتر میتوانید به <a href="https://laravel.com/docs/5.4/eloquent#defining-models" target="_blank">مستندات</a> لاراول مراجعه کنید.</span></p>

<p>&nbsp;</p>

<div class="row" style="background-color:#d4e1e9;margin-top:30px;padding:10px;"><strong>منبع:</strong> <a href="http://forum.ncis.ir/Thread-%D8%A2%D9%85%D9%88%D8%B2%D8%B4-%D8%AC%D8%A7%D9%85%D8%B9-Laravel?pid=5078#pid5078" target="_blank">کار با دیتابیس</a></div>
</div>
                <div id="date-row" class="row">
                    <div class="col-xs-12 col-sm-offset-6 col-sm-6 col-lg-offset-7 col-lg-5">
                        <div class="post-date">
                            <strong>نوشته شده در تاریخ: </strong>
                            <span>پنجشنبه ۱۳۹۶/۰۱/۳۱ ساعت ۰۵:۰۰ ب.ظ</span>
                        </div>
                    </div>
                </div>
                                                        <div class="row">
                        <div class="col-xs-12">
                            <div class="post-tag-row">
                                <strong class="text-info">برچسب ها: </strong>
                                <span class="text-success">
                                                                            <a href="http://samaiweb.com/tags/15" target="_blank">sql</a>
                                        ،                                                                             <a href="http://samaiweb.com/tags/14" target="_blank">table</a>
                                        ،                                                                             <a href="http://samaiweb.com/tags/19" target="_blank">database</a>
                                        ،                                                                             <a href="http://samaiweb.com/tags/20" target="_blank">env</a>
                                        ،                                                                             <a href="http://samaiweb.com/tags/13" target="_blank">join</a>
                                        ،                                                                             <a href="http://samaiweb.com/tags/18" target="_blank">migration</a>
                                        ،                                                                             <a href="http://samaiweb.com/tags/22" target="_blank">model</a>
                                        ،                                                                             <a href="http://samaiweb.com/tags/21" target="_blank">raw</a>
                                                                                                            </span>
                            </div>
                        </div>
                    </div>
                
                                            
                <div class="form-box alert-info text-left">
                    <div class="row fa-close-row">
                        <span class="fa fa-close fa-2x" title="" data-toggle="tooltip" data-original-title="جواب نمیدهم" style="display: none;"></span>
                    </div>
                    <div class="row">
                        <div id="success-error" class="col-xs-12 col-sm-offset-3 col-sm-5" style="display: none;"></div>
                        
                        <form method="POST" action="http://samaiweb.com/comments" accept-charset="UTF-8" id="create-comment"><input name="_token" value="SCXTG569bNX9OwnFvq8Nm8td7itDeil4fqyFTWYA" type="hidden">
                        <input name="_token" value="SCXTG569bNX9OwnFvq8Nm8td7itDeil4fqyFTWYA" type="hidden">

                        <input id="post_id" name="post_id" value="10" type="hidden">
                        <input id="parent_id" name="parent_id" value="0" type="hidden">

                        <div id="username" class="row form-group ">
                            <div class="col-xs-12 col-sm-3">
                                <label for="username">نام</label>
                            </div>
                            <div class="col-xs-12 col-sm-5">
                                <input class="form-control" placeholder="نام و نام خانوادگی" name="username" id="username" type="text">
                                                            </div>
                        </div>

                        <div id="url" class="row form-group ">
                            <div class="col-xs-12 col-sm-3">
                                <label for="url">سایت</label>
                            </div>
                            <div class="col-xs-12 col-sm-5">
                                <input class="form-control" placeholder="لینک سایت شما: http://example.com" name="url" id="url" type="text">
                                                            </div>
                        </div>

                        <div id="email" class="row form-group ">
                            <div class="col-xs-12 col-sm-3">
                                <label for="email">ایمیل</label>
                            </div>
                            <div class="col-xs-12 col-sm-5">
                                <input class="form-control" placeholder="ایمیل شما: example@example.com" name="email" id="email" type="text">
                                                            </div>
                        </div>

                        <div id="captcha" class="form-group ">
                            <div class="row">
                                <div class="col-xs-12 col-sm-3">
                                    <label for="captcha" class="control-label">کد امنیتی</label>
                                </div>
                                <div class="col-xs-12 col-sm-5">
                                    <input class="form-control" placeholder="کد امنیتی" name="captcha" id="captcha" type="text">
                                                                    </div>
                            </div>
                            <br>
                            <div class="row">
                                <div class="col-sm-3"></div>
                                <div class="col-xs-1 col-sm-1">
                                    <button type="button" id="refresh" class="btn btn-sm btn-info" title="" data-toggle="tooltip" data-original-title="تغییر کد امنیتی">
                                        <i class="glyphicon glyphicon-refresh"></i>
                                    </button>
                                </div>
                                <div class="col-xs-11 col-sm-4" id="captcha-div">
                                    <img src="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/flat.png" alt="captcha" title="" data-toggle="tooltip" data-original-title="کلیک کنید برای مشاهده تصویر در اندازه واقعی">
                                </div>
                            </div>
                        </div>

                        <div id="body" class="row form-group ">
                            <div class="col-xs-12 col-sm-3">
                                <label for="body">نظر</label>
                            </div>
                            <div class="col-xs-12 col-sm-5">
                                <textarea id="body" name="body" rows="10" style="resize:none;" class="form-control" placeholder="نظر شما در مورد این مطلب"></textarea>
                                                            </div>
                        </div>

                        <div class="row form-group">
                            <div class="col-xs-12 col-sm-offset-3 col-sm-5 text-center">
                                <input class="btn btn-lg btn-info" value="ارسال" type="submit">
                            </div>
                        </div>

                        </form>
                    </div>
                </div>
            </div>
    </div>
</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="scrol-to-top">
            <div class="scrollup" style="display: block;">
                <i class="fa fa-angle-double-up"></i>
            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="row">
                    <div class="col-xs-12 col-md-4">
                        <div class="well">
                            <h3>بازدیدهای سایت</h3>
                            <hr>
                            <div class="sidbar-main">
                                <div class="sidebar-content">
                                    <p><strong>افراد آنلاین:</strong> 1</p><p><strong>بازدید امروز:</strong> 8</p><p><strong>بازدید دیروز:</strong> 8</p><p><strong>بازدید کل:</strong> 5434</p>                                </div>
                                <!--<div class="sidebar-foot"></div>-->
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-12 col-md-4">
                        <div class="well">
                            <h3>پیوندها</h3>
                            <hr>
                            <div class="sidbar-main">
                                <div class="sidebar-content">
                                    <p><a href="https://secure.php.net/docs.php" target="_blank">مستندات php</a></p><p><a href="http://www.w3schools.com/php/" target="_blank">PHP Tutorial</a></p><p><a href="https://laravel.com/docs/5.3" target="_blank">مستندات laravel</a></p><p><a href="http://forum.ncis.ir/" target="_blank">تالار گفتمان ncis</a></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-12 col-md-4">
                        <div class="well">
                            <ul id="icons">
                                <li>
                                    <a href="https://www.facebook.com/topalternatives" target="_blank" rel="nofollow">
                                        <i class="fa fa-facebook"></i>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://twitter.com/topalt" target="_blank" rel="nofollow">
                                        <i class="fa fa-twitter"></i>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://topalternatives.com/feed/" target="_blank" rel="nofollow">
                                        <i class="fa fa-rss"></i>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://plus.google.com/u/0/b/101188387378944618683/101188387378944618683" target="_blank" rel="nofollow">
                                        <i class="fa fa-google-plus"></i>
                                    </a>
                                </li>
                                <li>
                                    <a href="https://www.youtube.com/channel/UCBuEJnRY2jGO0FY9SmlhfjA" target="_blank" rel="nofollow">
                                        <i class="fa fa-youtube"></i>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-xs-12">
                        <p class="pull-right">© کلیه حقوق این سایت متعلق به <a href="http://samaiweb.com/">وب سایت شخصی عبدالله سمعی</a> میباشد.</p>
                        <p class="pull-left">قدرت گرفته از فریمورک Laravel</p>
                    </div>
                </div>
            </div>
        </footer>



        <script src="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/jquery.js"></script>

        <script src="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/bootstrap_003.js"></script>

        <script src="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/bootstrap_002.js"></script>

        <script src="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/bootstrap.js"></script>

        <script src="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/bootstrap-submenu-script.js"></script>

        <script src="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/scripts.js"></script>

        <script src="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/transition.js"></script>

        <script src="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/highlight.js"></script>


        
    <script src="%D8%B3%D9%85%D8%B9%DB%8C%20%D9%88%D8%A8%20-%20%D8%B3%D8%A7%DB%8C%D8%AA%20%D8%B4%D8%AE%D8%B5%DB%8C%20%D8%B9%D8%A8%D8%AF%D8%A7%D9%84%D9%84%D9%87%20%D8%B3%D9%85%D8%B9%DB%8C%20%D8%B7%D8%B1%D8%A7%D8%AD%20%D9%88%20%D8%A8%D8%B1%D9%86%D8%A7%D9%85%D9%87%20%D9%86%D9%88%DB%8C%D8%B3%20%20%20%DA%A9%D8%A7%D8%B1%20%D8%A8%D8%A7%20%D8%AF%DB%8C%D8%AA%D8%A7%D8%A8%DB%8C%D8%B3%20%D8%AF%D8%B1%20laravel_files/show-comment.js"></script>



        <script type="text/javascript">hljs.initHighlightingOnLoad();</script>

    
</body></html>